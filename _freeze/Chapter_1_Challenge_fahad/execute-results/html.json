{
  "hash": "6b59cce98ace3f5266f33cf21a0b6491",
  "result": {
    "markdown": "---\ntitle: \"Challenge 1 - Data Science Fundamentals\"\ndate: \"05/30/2024\"\noutput: \n    html_document:\n        toc: TRUE\n        theme: flatly\n        highlight: tango\n        code_folding: hide\n        df_print: paged\n---\n\n\n\n\n# Challenge Summary\n\n__Your organization wants to know which companies are similar to each other to help in identifying potential customers of a SAAS software solution (e.g. Salesforce CRM or equivalent) in various segments of the market. The Sales Department is very interested in this analysis, which will help them more easily penetrate various market segments.__\n\nYou will be using stock prices in this analysis. You come up with a method to classify companies based on how their stocks trade using their daily stock returns (percentage movement from one day to the next). This analysis will help your organization determine which companies are related to each other (competitors and have similar attributes). \n\nYou can analyze the stock prices using what you've learned in the unsupervised learning tools including K-Means and UMAP. You will use a combination of `kmeans()` to find groups and `umap()` to visualize similarity of daily stock returns.\n\n# Objectives\n\nApply your knowledge on K-Means and UMAP along with `dplyr`, `ggplot2`, and `purrr` to create a visualization that identifies subgroups in the S&P 500 Index. You will specifically apply:\n\n- Modeling: `kmeans()` and `umap()`\n- Iteration: `purrr`\n- Data Manipulation: `dplyr`, `tidyr`, and `tibble`\n- Visualization: `ggplot2` (bonus `plotly`)\n\n\n# Libraries\n\nLoad the following libraries. \n\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-1_fe2645386b80583ce743d7ad538f9bea'}\n\n```{.r .cell-code}\n# install.packages(\"plotly\")\n\nlibrary(tidyverse)\nlibrary(tidyquant)\nlibrary(broom)\nlibrary(umap)\n```\n:::\n\n\n\n# Data\n\nWe will be using stock prices in this analysis. Although some of you know already how to use an API to retrieve stock prices I obtained the stock prices for every stock in the S&P 500 index for you already. The files are saved in the `session_6_data` directory. \n\nWe can read in the stock prices. The data is 1.2M observations. The most important columns for our analysis are:\n\n- `symbol`: The stock ticker symbol that corresponds to a company's stock price\n- `date`: The timestamp relating the symbol to the share price at that point in time\n- `adjusted`: The stock price, adjusted for any splits and dividends (we use this when analyzing stock data over long periods of time) \n\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-2_e624ac0b7e16c10264c1f7013f163de0'}\n\n```{.r .cell-code}\n# STOCK PRICES\nsp_500_prices_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/sp_500_prices_tbl.rds\")\nsp_500_prices_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,225,765 × 8\n   symbol date        open  high   low close   volume adjusted\n   <chr>  <date>     <dbl> <dbl> <dbl> <dbl>    <dbl>    <dbl>\n 1 MSFT   2009-01-02  19.5  20.4  19.4  20.3 50084000     15.9\n 2 MSFT   2009-01-05  20.2  20.7  20.1  20.5 61475200     16.0\n 3 MSFT   2009-01-06  20.8  21    20.6  20.8 58083400     16.2\n 4 MSFT   2009-01-07  20.2  20.3  19.5  19.5 72709900     15.2\n 5 MSFT   2009-01-08  19.6  20.2  19.5  20.1 70255400     15.7\n 6 MSFT   2009-01-09  20.2  20.3  19.4  19.5 49815300     15.2\n 7 MSFT   2009-01-12  19.7  19.8  19.3  19.5 52163500     15.2\n 8 MSFT   2009-01-13  19.5  20.0  19.5  19.8 65843500     15.5\n 9 MSFT   2009-01-14  19.5  19.7  19.0  19.1 80257500     14.9\n10 MSFT   2009-01-15  19.1  19.3  18.5  19.2 96169800     15.0\n# ℹ 1,225,755 more rows\n```\n:::\n:::\n\n\nThe second data frame contains information about the stocks the most important of which are:\n\n- `company`: The company name\n- `sector`: The sector that the company belongs to\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-3_2a393f88dbff156b92a23761c11c5cf3'}\n\n```{.r .cell-code}\n# SECTOR INFORMATION\nsp_500_index_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/sp_500_index_tbl.rds\")\nsp_500_index_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    symbol                                             company       weight\n1     MSFT                               Microsoft Corporation 3.589659e-02\n2     AAPL                                          Apple Inc. 3.299844e-02\n3     AMZN                                     Amazon.com Inc. 2.834845e-02\n4    BRK.B                     Berkshire Hathaway Inc. Class B 1.714493e-02\n5       FB                               Facebook Inc. Class A 1.676060e-02\n6      JNJ                                   Johnson & Johnson 1.570168e-02\n7      JPM                                JPMorgan Chase & Co. 1.507235e-02\n8     GOOG                               Alphabet Inc. Class C 1.470747e-02\n9    GOOGL                               Alphabet Inc. Class A 1.436854e-02\n10     XOM                             Exxon Mobil Corporation 1.412361e-02\n11     BAC                                Bank of America Corp 1.141184e-02\n12     UNH                     UnitedHealth Group Incorporated 1.119696e-02\n13       V                                   Visa Inc. Class A 1.093462e-02\n14      PG                            Procter & Gamble Company 1.053192e-02\n15     PFE                                         Pfizer Inc. 1.052585e-02\n16    INTC                                   Intel Corporation 1.012464e-02\n17     CVX                                 Chevron Corporation 9.790428e-03\n18      VZ                         Verizon Communications Inc. 9.784105e-03\n19    CSCO                                  Cisco Systems Inc. 9.544976e-03\n20       T                                           AT&T Inc. 9.518933e-03\n21      BA                                      Boeing Company 9.479343e-03\n22      HD                                     Home Depot Inc. 9.332370e-03\n23     WFC                               Wells Fargo & Company 8.957703e-03\n24     MRK                                    Merck & Co. Inc. 8.915412e-03\n25      MA                     Mastercard Incorporated Class A 8.635942e-03\n26      KO                                   Coca-Cola Company 7.439485e-03\n27   CMCSA                         Comcast Corporation Class A 7.368779e-03\n28     DIS                                 Walt Disney Company 7.194712e-03\n29     PEP                                        PepsiCo Inc. 7.023937e-03\n30       C                                      Citigroup Inc. 6.744127e-03\n31    NFLX                                        Netflix Inc. 6.680205e-03\n32     WMT                                        Walmart Inc. 6.127690e-03\n33     MCD                              McDonald's Corporation 5.961227e-03\n34     ABT                                 Abbott Laboratories 5.673213e-03\n35    ORCL                                  Oracle Corporation 5.649621e-03\n36      PM                    Philip Morris International Inc. 5.569381e-03\n37    ADBE                                          Adobe Inc. 5.423148e-03\n38     IBM         International Business Machines Corporation 5.378546e-03\n39     UNP                           Union Pacific Corporation 5.373873e-03\n40    DWDP                                      DowDuPont Inc. 5.343558e-03\n41     MDT                                       Medtronic plc 5.320276e-03\n42    ABBV                                         AbbVie Inc. 5.227510e-03\n43     MMM                                          3M Company 5.225519e-03\n44     CRM                                 salesforce.com inc. 5.221497e-03\n45    AMGN                                          Amgen Inc. 5.154364e-03\n46    AVGO                                       Broadcom Inc. 5.010262e-03\n47     LLY                               Eli Lilly and Company 4.959256e-03\n48     HON                        Honeywell International Inc. 4.860377e-03\n49    PYPL                                 PayPal Holdings Inc 4.796215e-03\n50     NKE                                   NIKE Inc. Class B 4.662578e-03\n51     UTX                     United Technologies Corporation 4.450672e-03\n52     TXN                      Texas Instruments Incorporated 4.437206e-03\n53     TMO                       Thermo Fisher Scientific Inc. 4.363659e-03\n54     ACN                               Accenture Plc Class A 4.355615e-03\n55    NVDA                                  NVIDIA Corporation 4.119677e-03\n56    COST                        Costco Wholesale Corporation 4.072393e-03\n57     LIN                                           Linde plc 3.986931e-03\n58      MO                                    Altria Group Inc 3.917806e-03\n59     CVS                              CVS Health Corporation 3.853464e-03\n60    BKNG                               Booking Holdings Inc. 3.844550e-03\n61     NEE                                 NextEra Energy Inc. 3.774455e-03\n62      GE                            General Electric Company 3.767361e-03\n63    SBUX                               Starbucks Corporation 3.765740e-03\n64    GILD                                Gilead Sciences Inc. 3.740188e-03\n65     BMY                        Bristol-Myers Squibb Company 3.620328e-03\n66     LOW                               Lowe's Companies Inc. 3.611353e-03\n67     COP                                      ConocoPhillips 3.482849e-03\n68    ANTM                                         Anthem Inc. 3.459557e-03\n69     CAT                                    Caterpillar Inc. 3.452684e-03\n70     AMT                          American Tower Corporation 3.362129e-03\n71     USB                                        U.S. Bancorp 3.355776e-03\n72     UPS                  United Parcel Service Inc. Class B 3.308592e-03\n73     LMT                         Lockheed Martin Corporation 3.248902e-03\n74     AXP                            American Express Company 3.238637e-03\n75      CI                                   Cigna Corporation 3.172444e-03\n76    MDLZ                 Mondelez International Inc. Class A 3.018507e-03\n77      GS                            Goldman Sachs Group Inc. 2.949052e-03\n78     DHR                                 Danaher Corporation 2.945331e-03\n79    BIIB                                         Biogen Inc. 2.878567e-03\n80     BDX                        Becton Dickinson and Company 2.859908e-03\n81     ADP                      Automatic Data Processing Inc. 2.800078e-03\n82    CELG                                 Celgene Corporation 2.724370e-03\n83    QCOM                               QUALCOMM Incorporated 2.704791e-03\n84     CME                              CME Group Inc. Class A 2.693005e-03\n85     TJX                                   TJX Companies Inc 2.688162e-03\n86    ISRG                             Intuitive Surgical Inc. 2.687962e-03\n87     DUK                             Duke Energy Corporation 2.677987e-03\n88    CHTR                 Charter Communications Inc. Class A 2.661359e-03\n89     SLB                                     Schlumberger NV 2.656396e-03\n90      CB                                       Chubb Limited 2.635526e-03\n91    INTU                                         Intuit Inc. 2.599428e-03\n92     WBA                        Walgreens Boots Alliance Inc 2.537987e-03\n93     CSX                                     CSX Corporation 2.499398e-03\n94     EOG                                  EOG Resources Inc. 2.479198e-03\n95     SYK                                 Stryker Corporation 2.475356e-03\n96     PNC                   PNC Financial Services Group Inc. 2.461979e-03\n97      CL                           Colgate-Palmolive Company 2.459598e-03\n98     SPG                           Simon Property Group Inc. 2.420539e-03\n99    SCHW                          Charles Schwab Corporation 2.380268e-03\n100    BSX                       Boston Scientific Corporation 2.362500e-03\n101      D                                 Dominion Energy Inc 2.362490e-03\n102     MS                                      Morgan Stanley 2.357517e-03\n103   FOXA               Twenty-First Century Fox Inc. Class A 2.286632e-03\n104    BLK                                      BlackRock Inc. 2.263240e-03\n105    RTN                                    Raytheon Company 2.245281e-03\n106    OXY                    Occidental Petroleum Corporation 2.194796e-03\n107     GM                              General Motors Company 2.190574e-03\n108     DE                                     Deere & Company 2.180539e-03\n109     SO                                    Southern Company 2.143840e-03\n110    NSC                        Norfolk Southern Corporation 2.139458e-03\n111    NOC                        Northrop Grumman Corporation 2.133255e-03\n112   SPGI                                     S&P Global Inc. 2.128033e-03\n113    CCI                     Crown Castle International Corp 2.127052e-03\n114     GD                        General Dynamics Corporation 2.084551e-03\n115     BK                 Bank of New York Mellon Corporation 2.081129e-03\n116   VRTX                 Vertex Pharmaceuticals Incorporated 2.052085e-03\n117     MU                              Micron Technology Inc. 2.021239e-03\n118    EXC                                  Exelon Corporation 1.989433e-03\n119    MMC                     Marsh & McLennan Companies Inc. 1.961229e-03\n120    ZTS                                 Zoetis Inc. Class A 1.957868e-03\n121    MPC                      Marathon Petroleum Corporation 1.930374e-03\n122    PLD                                       Prologis Inc. 1.912765e-03\n123    MET                                        MetLife Inc. 1.906152e-03\n124    ITW                            Illinois Tool Works Inc. 1.901359e-03\n125    AGN                                        Allergan plc 1.894716e-03\n126   ILMN                                       Illumina Inc. 1.881459e-03\n127    FDX                                   FedEx Corporation 1.858768e-03\n128    ICE                      Intercontinental Exchange Inc. 1.849193e-03\n129    EMR                                Emerson Electric Co. 1.828073e-03\n130    HUM                                         Humana Inc. 1.825011e-03\n131   CTSH  Cognizant Technology Solutions Corporation Class A 1.818338e-03\n132    AON                                             Aon plc 1.779839e-03\n133    ECL                                         Ecolab Inc. 1.774246e-03\n134    PGR                             Progressive Corporation 1.773456e-03\n135    KMB                          Kimberly-Clark Corporation 1.754196e-03\n136    PSX                                         Phillips 66 1.751575e-03\n137    PRU                           Prudential Financial Inc. 1.680439e-03\n138    ADI                                 Analog Devices Inc. 1.677838e-03\n139    BBT                                    BB&T Corporation 1.672945e-03\n140    AEP                American Electric Power Company Inc. 1.667633e-03\n141    COF                   Capital One Financial Corporation 1.667192e-03\n142     WM                               Waste Management Inc. 1.664881e-03\n143    HCA                                  HCA Healthcare Inc 1.662640e-03\n144   AMAT                              Applied Materials Inc. 1.640689e-03\n145    TGT                                  Target Corporation 1.633986e-03\n146    APD                     Air Products and Chemicals Inc. 1.629554e-03\n147    AFL                                  Aflac Incorporated 1.614086e-03\n148    AIG                   American International Group Inc. 1.602040e-03\n149     EW                    Edwards Lifesciences Corporation 1.591745e-03\n150    HPQ                                             HP Inc. 1.572385e-03\n151    BAX                           Baxter International Inc. 1.557538e-03\n152    SHW                            Sherwin-Williams Company 1.553596e-03\n153    VLO                           Valero Energy Corporation 1.538518e-03\n154    FIS         Fidelity National Information Services Inc. 1.527503e-03\n155    KMI                           Kinder Morgan Inc Class P 1.522860e-03\n156   ROST                                    Ross Stores Inc. 1.512285e-03\n157   ADSK                                       Autodesk Inc. 1.491685e-03\n158    MAR                 Marriott International Inc. Class A 1.489754e-03\n159     EL                 Estee Lauder Companies Inc. Class A 1.484361e-03\n160   FISV                                         Fiserv Inc. 1.480919e-03\n161    TRV                            Travelers Companies Inc. 1.469054e-03\n162    ETN                                     Eaton Corp. Plc 1.454436e-03\n163   EQIX                                        Equinix Inc. 1.453206e-03\n164   ATVI                            Activision Blizzard Inc. 1.451855e-03\n165      F                                  Ford Motor Company 1.427123e-03\n166   EBAY                                           eBay Inc. 1.422420e-03\n167    WMB                             Williams Companies Inc. 1.408363e-03\n168   REGN                      Regeneron Pharmaceuticals Inc. 1.402270e-03\n169     EA                                Electronic Arts Inc. 1.393026e-03\n170    ALL                                Allstate Corporation 1.392405e-03\n171    JCI                  Johnson Controls International plc 1.385652e-03\n172    SYY                                   Sysco Corporation 1.378898e-03\n173    ROP                             Roper Technologies Inc. 1.376557e-03\n174    DAL                                Delta Air Lines Inc. 1.372395e-03\n175    RHT                                        Red Hat Inc. 1.369004e-03\n176     DG                          Dollar General Corporation 1.350724e-03\n177    SRE                                       Sempra Energy 1.345972e-03\n178   ORLY                            O'Reilly Automotive Inc. 1.332325e-03\n179    PSA                                      Public Storage 1.328894e-03\n180   XLNX                                         Xilinx Inc. 1.285252e-03\n181    STI                                 SunTrust Banks Inc. 1.279929e-03\n182    YUM                                    Yum! Brands Inc. 1.273546e-03\n183    LUV                              Southwest Airlines Co. 1.271535e-03\n184    KHC                                 Kraft Heinz Company 1.264782e-03\n185   WELL                                      Welltower Inc. 1.251195e-03\n186    STZ                   Constellation Brands Inc. Class A 1.248293e-03\n187   ALXN                        Alexion Pharmaceuticals Inc. 1.231145e-03\n188    TEL                                TE Connectivity Ltd. 1.220970e-03\n189   LRCX                            Lam Research Corporation 1.219289e-03\n190    PEG                 Public Service Enterprise Group Inc 1.214677e-03\n191    VFC                                    V.F. Corporation 1.208463e-03\n192    MCO                                 Moody's Corporation 1.206382e-03\n193    HAL                                 Halliburton Company 1.196988e-03\n194    LYB                        LyondellBasell Industries NV 1.196237e-03\n195    GLW                                         Corning Inc 1.194216e-03\n196    OKE                                          ONEOK Inc. 1.188553e-03\n197    APH                        Amphenol Corporation Class A 1.185542e-03\n198    XEL                                    Xcel Energy Inc. 1.179399e-03\n199    AVB                          AvalonBay Communities Inc. 1.156808e-03\n200    MCK                                McKesson Corporation 1.156177e-03\n201    EQR                                  Equity Residential 1.150735e-03\n202    GIS                                  General Mills Inc. 1.145642e-03\n203    STT                            State Street Corporation 1.145102e-03\n204    CNC                                 Centene Corporation 1.138238e-03\n205    PPG                                 PPG Industries Inc. 1.127853e-03\n206     IR                                  Ingersoll-Rand Plc 1.096718e-03\n207    ZBH                         Zimmer Biomet Holdings Inc. 1.073786e-03\n208      A                           Agilent Technologies Inc. 1.061240e-03\n209    MTB                                M&T Bank Corporation 1.058008e-03\n210    PXD                   Pioneer Natural Resources Company 1.051955e-03\n211    CXO                               Concho Resources Inc. 1.051925e-03\n212    DFS                         Discover Financial Services 1.043961e-03\n213     ED                            Consolidated Edison Inc. 1.042370e-03\n214    HLT                       Hilton Worldwide Holdings Inc 1.041860e-03\n215    FOX               Twenty-First Century Fox Inc. Class B 1.041340e-03\n216   PAYX                                        Paychex Inc. 1.035437e-03\n217    FTV                                       Fortive Corp. 1.033396e-03\n218   PCAR                                          PACCAR Inc 1.017388e-03\n219    DLR                           Digital Realty Trust Inc. 1.011595e-03\n220   TROW                                 T. Rowe Price Group 1.010384e-03\n221    ADM                      Archer-Daniels-Midland Company 1.006973e-03\n222     KR                                          Kroger Co. 1.001020e-03\n223    CMI                                        Cummins Inc. 9.979983e-04\n224   DLTR                                    Dollar Tree Inc. 9.979783e-04\n225    AZO                                       AutoZone Inc. 9.977982e-04\n226    WEC                                WEC Energy Group Inc 9.976581e-04\n227   MNST                        Monster Beverage Corporation 9.970779e-04\n228    APC                      Anadarko Petroleum Corporation 9.903545e-04\n229  CCL.U                                Carnival Corporation 9.873830e-04\n230    VTR                                         Ventas Inc. 9.864626e-04\n231    HPE                      Hewlett Packard Enterprise Co. 9.839113e-04\n232     PH                         Parker-Hannifin Corporation 9.801494e-04\n233    IQV                                  IQVIA Holdings Inc 9.759873e-04\n234    MSI                             Motorola Solutions Inc. 9.730559e-04\n235   TWTR                                        Twitter Inc. 9.606297e-04\n236   WLTW         Willis Towers Watson Public Limited Company 9.449018e-04\n237     ES                                   Eversource Energy 9.445016e-04\n238    PPL                                     PPL Corporation 9.408298e-04\n239    ROK                            Rockwell Automation Inc. 9.317452e-04\n240    DTE                                  DTE Energy Company 9.294641e-04\n241    SYF                                 Synchrony Financial 9.250619e-04\n242   APTV                                           Aptiv PLC 9.162075e-04\n243   MCHP                   Microchip Technology Incorporated 9.087137e-04\n244    TDG                        TransDigm Group Incorporated 9.086637e-04\n245   SBAC                    SBA Communications Corp. Class A 9.083636e-04\n246    SWK                         Stanley Black & Decker Inc. 8.942865e-04\n247    AMD                         Advanced Micro Devices Inc. 8.933361e-04\n248   NTRS                          Northern Trust Corporation 8.885036e-04\n249      O                           Realty Income Corporation 8.874931e-04\n250   VRSK                                Verisk Analytics Inc 8.821104e-04\n251    BXP                              Boston Properties Inc. 8.754071e-04\n252    UAL                    United Continental Holdings Inc. 8.631610e-04\n253    RCL                        Royal Caribbean Cruises Ltd. 8.626407e-04\n254    CLX                                      Clorox Company 8.558573e-04\n255    FLT                          FleetCor Technologies Inc. 8.436713e-04\n256    EIX                                Edison International 8.369679e-04\n257    GPN                                Global Payments Inc. 8.353671e-04\n258    HRS                                  Harris Corporation 8.295442e-04\n259     IP                         International Paper Company 8.223906e-04\n260     FE                                   FirstEnergy Corp. 8.221105e-04\n261     WY                                Weyerhaeuser Company 8.213501e-04\n262   INFO                                     IHS Markit Ltd. 8.174982e-04\n263   CERN                                  Cerner Corporation 8.136563e-04\n264   VRSN                                       VeriSign Inc. 8.048018e-04\n265    NUE                                   Nucor Corporation 8.041515e-04\n266    BLL                                    Ball Corporation 7.976183e-04\n267   ALGN                               Align Technology Inc. 7.962776e-04\n268    TSN                            Tyson Foods Inc. Class A 7.915152e-04\n269    AMP                           Ameriprise Financial Inc. 7.904947e-04\n270    KEY                                             KeyCorp 7.861025e-04\n271    DXC                                  DXC Technology Co. 7.849519e-04\n272    ESS                           Essex Property Trust Inc. 7.820805e-04\n273   IDXX                             IDEXX Laboratories Inc. 7.770380e-04\n274    AME                                         AMETEK Inc. 7.766478e-04\n275   FITB                                 Fifth Third Bancorp 7.736063e-04\n276    WAT                                  Waters Corporation 7.714552e-04\n277   FAST                                    Fastenal Company 7.690040e-04\n278    FCX                               Freeport-McMoRan Inc. 7.602396e-04\n279    AWK                   American Water Works Company Inc. 7.555272e-04\n280    NEM                          Newmont Mining Corporation 7.529760e-04\n281   CTAS                                  Cintas Corporation 7.481436e-04\n282    CFG                       Citizens Financial Group Inc. 7.464627e-04\n283   ULTA                                     Ulta Beauty Inc 7.426108e-04\n284    HIG              Hartford Financial Services Group Inc. 7.408799e-04\n285    FRC                                 First Republic Bank 7.325258e-04\n286    CBS                             CBS Corporation Class B 7.311351e-04\n287    RSG                              Republic Services Inc. 7.226008e-04\n288   KLAC                              KLA-Tencor Corporation 7.217504e-04\n289    AEE                                  Ameren Corporation 7.206898e-04\n290    MTD                   Mettler-Toledo International Inc. 7.184887e-04\n291    OMC                                   Omnicom Group Inc 7.175283e-04\n292    CAH                                Cardinal Health Inc. 7.103347e-04\n293     RF                       Regions Financial Corporation 7.101146e-04\n294   NTAP                                         NetApp Inc. 7.097444e-04\n295    LLL                                 L3 Technologies Inc 7.066829e-04\n296    MYL                                          Mylan N.V. 7.006999e-04\n297   ABMD                                        ABIOMED Inc. 6.935163e-04\n298   FANG                             Diamondback Energy Inc. 6.920756e-04\n299    ETR                                 Entergy Corporation 6.896343e-04\n300   EVRG                                         Evergy Inc. 6.780386e-04\n301   CBRE                             CBRE Group Inc. Class A 6.753972e-04\n302   MXIM                      Maxim Integrated Products Inc. 6.719555e-04\n303    CHD                            Church & Dwight Co. Inc. 6.718755e-04\n304    GPC                               Genuine Parts Company 6.684037e-04\n305    MKC                    McCormick & Company Incorporated 6.650521e-04\n306    TSS                          Total System Services Inc. 6.647519e-04\n307   MSCI                                   MSCI Inc. Class A 6.631811e-04\n308     LH          Laboratory Corporation of America Holdings 6.526559e-04\n309    HSY                                     Hershey Company 6.524658e-04\n310    CNP                             CenterPoint Energy Inc. 6.480336e-04\n311   EXPE                                  Expedia Group Inc. 6.438815e-04\n312   KEYS                           Keysight Technologies Inc 6.404798e-04\n313   HBAN                  Huntington Bancshares Incorporated 6.392192e-04\n314   SNPS                                       Synopsys Inc. 6.389991e-04\n315    CMS                              CMS Energy Corporation 6.380286e-04\n316    CMG                         Chipotle Mexican Grill Inc. 6.367779e-04\n317   SWKS                             Skyworks Solutions Inc. 6.361676e-04\n318    VMC                            Vulcan Materials Company 6.352072e-04\n319   SYMC                                Symantec Corporation 6.343768e-04\n320    HCP                                            HCP Inc. 6.318055e-04\n321   CDNS                         Cadence Design Systems Inc. 6.312652e-04\n322   INCY                                  Incyte Corporation 6.284338e-04\n323   ANSS                                          ANSYS Inc. 6.232512e-04\n324    MRO                            Marathon Oil Corporation 6.196694e-04\n325    HES                                    Hess Corporation 6.190591e-04\n326    AJG                           Arthur J. Gallagher & Co. 6.175784e-04\n327    MGM                           MGM Resorts International 6.163778e-04\n328    GWW                                  W.W. Grainger Inc. 6.140466e-04\n329      K                                     Kellogg Company 6.137565e-04\n330    AAL                        American Airlines Group Inc. 6.124658e-04\n331    LEN                          Lennar Corporation Class A 6.092742e-04\n332    ARE                Alexandria Real Estate Equities Inc. 6.082837e-04\n333    RMD                                         ResMed Inc. 6.071331e-04\n334    BBY                                   Best Buy Co. Inc. 6.056024e-04\n335    CMA                               Comerica Incorporated 5.996494e-04\n336    WCG                          WellCare Health Plans Inc. 5.953673e-04\n337    DRI                             Darden Restaurants Inc. 5.935464e-04\n338    ABC                       AmerisourceBergen Corporation 5.918655e-04\n339    WDC                         Western Digital Corporation 5.916054e-04\n340    HST                          Host Hotels & Resorts Inc. 5.866429e-04\n341    DHI                                    D.R. Horton Inc. 5.829311e-04\n342   CTXS                                 Citrix Systems Inc. 5.824008e-04\n343    TXT                                        Textron Inc. 5.822107e-04\n344   ANET                                Arista Networks Inc. 5.821006e-04\n345    COO                               Cooper Companies Inc. 5.809801e-04\n346    DOV                                   Dover Corporation 5.751772e-04\n347    PFG                      Principal Financial Group Inc. 5.747170e-04\n348    TFX                               Teleflex Incorporated 5.732262e-04\n349    DVN                            Devon Energy Corporation 5.712452e-04\n350    IFF             International Flavors & Fragrances Inc. 5.703548e-04\n351    LNC                        Lincoln National Corporation 5.692042e-04\n352    XYL                                          Xylem Inc. 5.646419e-04\n353   BHGE                   Baker Hughes a GE Company Class A 5.601297e-04\n354    EFX                                        Equifax Inc. 5.579286e-04\n355     CE                                Celanese Corporation 5.579186e-04\n356    CTL                                    CenturyLink Inc. 5.574683e-04\n357      L                                   Loews Corporation 5.549771e-04\n358   SIVB                                 SVB Financial Group 5.546369e-04\n359     IT                                        Gartner Inc. 5.531062e-04\n360   CINF                    Cincinnati Financial Corporation 5.520556e-04\n361   EXPD         Expeditors International of Washington Inc. 5.477835e-04\n362   CHRW                        C.H. Robinson Worldwide Inc. 5.420206e-04\n363    APA                                  Apache Corporation 5.405199e-04\n364    EXR                            Extra Space Storage Inc. 5.384689e-04\n365   HOLX                                        Hologic Inc. 5.374083e-04\n366    AAP                             Advance Auto Parts Inc. 5.350071e-04\n367    NRG                                     NRG Energy Inc. 5.292443e-04\n368    UDR                                            UDR Inc. 5.268831e-04\n369   ETFC                       E*TRADE Financial Corporation 5.260527e-04\n370    VAR                         Varian Medical Systems Inc. 5.234614e-04\n371   WYNN                                Wynn Resorts Limited 5.205199e-04\n372    CAG                                 Conagra Brands Inc. 5.101947e-04\n373   FTNT                                       Fortinet Inc. 5.097445e-04\n374    STX                              Seagate Technology PLC 5.096245e-04\n375    DGX                      Quest Diagnostics Incorporated 5.065029e-04\n376    MLM                      Martin Marietta Materials Inc. 5.062028e-04\n377   TSCO                              Tractor Supply Company 5.057225e-04\n378    VNO                                Vornado Realty Trust 5.054024e-04\n379    MAA              Mid-America Apartment Communities Inc. 5.031012e-04\n380    HRL                            Hormel Foods Corporation 5.012603e-04\n381     BR                 Broadridge Financial Solutions Inc. 4.989791e-04\n382    SJM                                J.M. Smucker Company 4.983588e-04\n383    EMN                            Eastman Chemical Company 4.979786e-04\n384    UHS              Universal Health Services Inc. Class B 4.975784e-04\n385   NCLH                 Norwegian Cruise Line Holdings Ltd. 4.973683e-04\n386    MAS                                   Masco Corporation 4.912953e-04\n387   AKAM                            Akamai Technologies Inc. 4.905549e-04\n388    ATO                            Atmos Energy Corporation 4.900247e-04\n389    TAP                Molson Coors Brewing Company Class B 4.867230e-04\n390    MOS                                      Mosaic Company 4.859326e-04\n391    FMC                                     FMC Corporation 4.848721e-04\n392    NOV                         National Oilwell Varco Inc. 4.833113e-04\n393    REG                         Regency Centers Corporation 4.802398e-04\n394    URI                                 United Rentals Inc. 4.765079e-04\n395    COG                         Cabot Oil & Gas Corporation 4.752273e-04\n396    AES                                     AES Corporation 4.750672e-04\n397    KSS                                  Kohl's Corporation 4.714254e-04\n398    KMX                                         CarMax Inc. 4.696045e-04\n399    KSU                                Kansas City Southern 4.682138e-04\n400   CPRT                                         Copart Inc. 4.660327e-04\n401    NBL                                   Noble Energy Inc. 4.633514e-04\n402    RJF                        Raymond James Financial Inc. 4.619907e-04\n403   TTWO                  Take-Two Interactive Software Inc. 4.529462e-04\n404    DRE                             Duke Realty Corporation 4.512753e-04\n405    LNT                                 Alliant Energy Corp 4.485540e-04\n406   CBOE                             Cboe Global Markets Inc 4.448721e-04\n407   FFIV                                    F5 Networks Inc. 4.446620e-04\n408   JKHY                        Jack Henry & Associates Inc. 4.428011e-04\n409     LW                           Lamb Weston Holdings Inc. 4.403699e-04\n410    PKI                                    PerkinElmer Inc. 4.390992e-04\n411    TPR                                       Tapestry Inc. 4.385890e-04\n412   VIAB                                 Viacom Inc. Class B 4.367881e-04\n413    FTI                                      TechnipFMC Plc 4.341868e-04\n414    HAS                                         Hasbro Inc. 4.310552e-04\n415   NDAQ                                         Nasdaq Inc. 4.308651e-04\n416    IRM                                  Iron Mountain Inc. 4.289042e-04\n417    PNW                   Pinnacle West Capital Corporation 4.272633e-04\n418    WRK                                    WestRock Company 4.253424e-04\n419  DISCK                              Discovery Inc. Class C 4.248021e-04\n420    BEN                             Franklin Resources Inc. 4.240517e-04\n421    TIF                                       Tiffany & Co. 4.230212e-04\n422    FRT                     Federal Realty Investment Trust 4.207801e-04\n423     NI                                        NiSource Inc 4.200297e-04\n424   JBHT                   J.B. Hunt Transport Services Inc. 4.181888e-04\n425   ZION                           Zions Bancorporation N.A. 4.156776e-04\n426     CF                         CF Industries Holdings Inc. 4.141368e-04\n427   XRAY                                DENTSPLY SIRONA Inc. 4.130963e-04\n428   HSIC                                   Henry Schein Inc. 4.068632e-04\n429    HII                  Huntington Ingalls Industries Inc. 4.054825e-04\n430   JNPR                               Juniper Networks Inc. 4.021908e-04\n431    HFC                           HollyFrontier Corporation 4.006400e-04\n432   NLSN                                Nielsen Holdings Plc 4.002899e-04\n433    PKG                    Packaging Corporation of America 3.944870e-04\n434    AVY                          Avery Dennison Corporation 3.883139e-04\n435    IPG                 Interpublic Group of Companies Inc. 3.825310e-04\n436    SNA                                Snap-on Incorporated 3.805400e-04\n437    WHR                               Whirlpool Corporation 3.793094e-04\n438     RE                               Everest Re Group Ltd. 3.785190e-04\n439    ALB                               Albemarle Corporation 3.767281e-04\n440    MHK                              Mohawk Industries Inc. 3.750773e-04\n441    BWA                                     BorgWarner Inc. 3.740268e-04\n442   ALLE                                        Allegion PLC 3.714054e-04\n443   GRMN                                         Garmin Ltd. 3.696846e-04\n444    PVH                                           PVH Corp. 3.696646e-04\n445    TMK                               Torchmark Corporation 3.691343e-04\n446    LKQ                                     LKQ Corporation 3.688242e-04\n447    ADS                   Alliance Data Systems Corporation 3.505650e-04\n448   BF.B                    Brown-Forman Corporation Class B 3.505650e-04\n449    RHI                      Robert Half International Inc. 3.495245e-04\n450    JEC                       Jacobs Engineering Group Inc. 3.482939e-04\n451    ALK                               Alaska Air Group Inc. 3.471433e-04\n452   QRVO                                          Qorvo Inc. 3.466931e-04\n453     WU                               Western Union Company 3.396196e-04\n454    UNM                                          Unum Group 3.383189e-04\n455    SLG                               SL Green Realty Corp. 3.379187e-04\n456    AIV Apartment Investment and Management Company Class A 3.317456e-04\n457    IVZ                                        Invesco Ltd. 3.289042e-04\n458      M                                          Macy's Inc 3.234915e-04\n459   ARNC                                        Arconic Inc. 3.221308e-04\n460    KIM                            Kimco Realty Corporation 3.205200e-04\n461    DVA                                         DaVita Inc. 3.198897e-04\n462    NWL                                   Newell Brands Inc 3.183990e-04\n463    AOS                             A. O. Smith Corporation 3.176186e-04\n464    XEC                                  Cimarex Energy Co. 3.077136e-04\n465   NKTR                                 Nektar Therapeutics 3.070933e-04\n466   FLIR                                   FLIR Systems Inc. 3.052424e-04\n467    PHM                                     PulteGroup Inc. 3.023210e-04\n468     RL                    Ralph Lauren Corporation Class A 3.008902e-04\n469   DISH                    DISH Network Corporation Class A 3.003400e-04\n470    PNR                                         Pentair plc 2.993395e-04\n471     FL                                    Foot Locker Inc. 2.956276e-04\n472    HBI                                    Hanesbrands Inc. 2.951674e-04\n473    XRX                                   Xerox Corporation 2.891744e-04\n474   FBHS                 Fortune Brands Home & Security Inc. 2.876636e-04\n475    SEE                              Sealed Air Corporation 2.856726e-04\n476   CPRI                              Capri Holdings Limited 2.830813e-04\n477    CPB                               Campbell Soup Company 2.824010e-04\n478   PBCT                      People's United Financial Inc. 2.756476e-04\n479     LB                                       L Brands Inc. 2.663130e-04\n480    FLS                               Flowserve Corporation 2.653125e-04\n481     HP                              Helmerich & Payne Inc. 2.652424e-04\n482    HOG                                Harley-Davidson Inc. 2.649123e-04\n483   PRGO                                     Perrigo Co. Plc 2.626111e-04\n484    JEF                      Jefferies Financial Group Inc. 2.601699e-04\n485    ROL                                        Rollins Inc. 2.528763e-04\n486    LEG                        Leggett & Platt Incorporated 2.523660e-04\n487    AMG                      Affiliated Managers Group Inc. 2.485041e-04\n488   TRIP                                    TripAdvisor Inc. 2.479238e-04\n489   IPGP                           IPG Photonics Corporation 2.379788e-04\n490    GPS                                            Gap Inc. 2.343470e-04\n491    PWR                                Quanta Services Inc. 2.245821e-04\n492    AIZ                                       Assurant Inc. 2.211204e-04\n493    JWN                                      Nordstrom Inc. 2.172385e-04\n494    FLR                                   Fluor Corporation 2.166282e-04\n495    BHF                          Brighthouse Financial Inc. 2.135266e-04\n496   COTY                                   Coty Inc. Class A 2.120159e-04\n497    HRB                                      H&R Block Inc. 2.095646e-04\n498   NWSA                            News Corporation Class A 2.074036e-04\n499    MAT                                         Mattel Inc. 2.017908e-04\n500    MAC                                    Macerich Company 1.996897e-04\n501  DISCA                              Discovery Inc. Class A 1.940669e-04\n502     GT                      Goodyear Tire & Rubber Company 1.899448e-04\n503    UAA                           Under Armour Inc. Class A 1.670134e-04\n504     UA                           Under Armour Inc. Class C 1.521260e-04\n505    NWS                            News Corporation Class B 6.290141e-05\n506 ECA-CA                                  Encana Corporation 7.893942e-06\n                    sector shares_held\n1   Information Technology    84853600\n2   Information Technology    49533308\n3   Consumer Discretionary     4510051\n4               Financials    21364490\n5   Communication Services    26385216\n6              Health Care    29452358\n7               Financials    36529800\n8   Communication Services     3378423\n9   Communication Services     3282939\n10                  Energy    46493644\n11              Financials   100285460\n12             Health Care    10564454\n13  Information Technology    19303236\n14        Consumer Staples    27357982\n15             Health Care    63506110\n16  Information Technology    50135996\n17                  Energy    20984748\n18  Communication Services    45375500\n19  Information Technology    49397930\n20  Communication Services    79917256\n21             Industrials     5801735\n22  Consumer Discretionary    12408924\n23              Financials    46556430\n24             Health Care    28576474\n25  Information Technology     9946411\n26        Consumer Staples    42067310\n27  Communication Services    49908344\n28  Communication Services    16347008\n29        Consumer Staples    15501865\n30              Financials    26843670\n31  Communication Services     4788556\n32        Consumer Staples    15677056\n33  Consumer Discretionary     8473443\n34             Health Care    19286212\n35  Information Technology    27943780\n36        Consumer Staples    17070768\n37  Information Technology     5347148\n38  Information Technology     9968187\n39             Industrials     8075142\n40               Materials    25202004\n41             Health Care    14750220\n42             Health Care    16540164\n43             Industrials     6400274\n44  Information Technology     8398198\n45             Health Care     7000953\n46  Information Technology     4546147\n47             Health Care    10358008\n48             Industrials     8109534\n49  Information Technology    12927395\n50  Consumer Discretionary    13969941\n51             Industrials     8911586\n52  Information Technology    10552200\n53             Health Care     4421107\n54  Information Technology     6997603\n55  Information Technology     6698059\n56        Consumer Staples     4812566\n57               Materials     6051462\n58        Consumer Staples    20562772\n59             Health Care    14177615\n60  Consumer Discretionary      508639\n61               Utilities     5246468\n62             Industrials    95514760\n63  Consumer Discretionary    13623676\n64             Health Care    14155833\n65             Health Care    17923948\n66  Consumer Discretionary     8862585\n67                  Energy    12695394\n68             Health Care     2840374\n69             Industrials     6484917\n70             Real Estate     4836797\n71              Financials    16730737\n72             Industrials     7634037\n73             Industrials     2705191\n74              Financials     7715496\n75             Health Care     4101458\n76        Consumer Staples    16033591\n77              Financials     3800548\n78             Health Care     6773251\n79             Health Care     2212211\n80             Health Care     2945983\n81  Information Technology     4785852\n82             Health Care     7684789\n83  Information Technology    13311328\n84              Financials     3927643\n85  Consumer Discretionary    13690399\n86             Health Care     1253634\n87               Utilities     7828438\n88  Communication Services     1950416\n89                  Energy    15117770\n90              Financials     5061222\n91  Information Technology     2850040\n92        Consumer Staples     8841804\n93             Industrials     8814182\n94                  Energy     6326332\n95             Health Care     3389350\n96              Financials     5072966\n97        Consumer Staples     9464497\n98             Real Estate     3377012\n99              Financials    13134280\n100            Health Care    15105250\n101              Utilities     8249501\n102             Financials    14362621\n103 Communication Services    11606211\n104             Financials     1340362\n105            Industrials     3111283\n106                 Energy     8356286\n107 Consumer Discretionary    14335656\n108            Industrials     3508474\n109              Utilities    11293749\n110            Industrials     2992855\n111            Industrials     1901582\n112             Financials     2744956\n113            Real Estate     4529516\n114            Industrials     3043009\n115             Financials    10046857\n116            Health Care     2791257\n117 Information Technology    12313897\n118              Utilities    10545466\n119             Financials     5503610\n120            Health Care     5251650\n121                 Energy     7579710\n122            Real Estate     6873344\n123             Financials    10869825\n124            Industrials     3372816\n125            Health Care     3485269\n126            Health Care     1605308\n127            Industrials     2651972\n128             Financials     6265545\n129            Industrials     6845957\n130            Health Care     1504560\n131 Information Technology     6323489\n132             Financials     2647597\n133              Materials     2776346\n134             Financials     6366478\n135       Consumer Staples     3788826\n136                 Energy     4667958\n137             Financials     4565907\n138 Information Technology     4059161\n139             Financials     8441104\n140              Utilities     5381653\n141             Financials     5228546\n142            Industrials     4299405\n143            Health Care     2948341\n144 Information Technology    10734333\n145 Consumer Discretionary     5738562\n146              Materials     2394666\n147             Financials     8378780\n148             Financials     9683932\n149            Health Care     2290413\n150 Information Technology    17278248\n151            Health Care     5426107\n152              Materials      904940\n153                 Energy     4663221\n154 Information Technology     3587225\n155                 Energy    20721726\n156 Consumer Discretionary     4115142\n157 Information Technology     2379755\n158 Consumer Discretionary     3148294\n159       Consumer Staples     2449646\n160 Information Technology     4416413\n161             Financials     2919089\n162            Industrials     4725856\n163            Real Estate      882199\n164 Communication Services     8327456\n165 Consumer Discretionary    42749332\n166 Consumer Discretionary     9947385\n167                 Energy    13211548\n168            Health Care      846096\n169 Communication Services     3335426\n170             Financials     3774086\n171            Industrials    10098861\n172       Consumer Staples     5222715\n173            Industrials     1128806\n174            Industrials     6873085\n175 Information Technology     1935077\n176 Consumer Discretionary     2903658\n177              Utilities     2987326\n178 Consumer Discretionary      878425\n179            Real Estate     1636418\n180 Information Technology     2755723\n181             Financials     5028027\n182 Consumer Discretionary     3461448\n183            Industrials     5637370\n184       Consumer Staples     6794417\n185            Real Estate     4124124\n186       Consumer Staples     1825683\n187            Health Care     2433510\n188 Information Technology     3802557\n189 Information Technology     1722416\n190              Utilities     5517268\n191 Consumer Discretionary     3557434\n192             Financials     1823290\n193                 Energy     9613979\n194              Materials     3491712\n195 Information Technology     8852467\n196                 Energy     4490440\n197 Information Technology     3271969\n198              Utilities     5643593\n199            Real Estate     1509296\n200            Health Care     2181810\n201            Real Estate     4020945\n202       Consumer Staples     6506921\n203             Financials     4145673\n204            Health Care     4481716\n205              Materials     2644321\n206            Industrials     2678846\n207            Health Care     2221510\n208            Health Care     3467173\n209             Financials     1571095\n210                 Energy     1851432\n211                 Energy     2188314\n212             Financials     3746094\n213              Utilities     3396411\n214 Consumer Discretionary     3260214\n215 Communication Services     5325635\n216 Information Technology     3495366\n217            Industrials     3231765\n218            Industrials     3821761\n219            Real Estate     2249676\n220             Financials     2648802\n221       Consumer Staples     6136183\n222       Consumer Staples     8680506\n223            Industrials     1642124\n224 Consumer Discretionary     2582660\n225 Consumer Discretionary      277521\n226              Utilities     3427101\n227       Consumer Staples     4343785\n228                 Energy     5601322\n229 Consumer Discretionary     4412013\n230            Real Estate     3869811\n231 Information Technology    15643081\n232            Industrials     1443835\n233            Health Care     1760100\n234 Information Technology     1795575\n235 Communication Services     7868838\n236             Financials     1425562\n237              Utilities     3441836\n238              Utilities     7901413\n239            Industrials     1343665\n240              Utilities     1984554\n241             Financials     7453370\n242 Consumer Discretionary     2895350\n243 Information Technology     2551726\n244            Industrials      528184\n245            Real Estate     1252681\n246            Industrials     1677327\n247 Information Technology     9650679\n248             Financials     2441622\n249            Real Estate     3239184\n250            Industrials     1799774\n251            Real Estate     1675955\n252            Industrials     2500381\n253 Consumer Discretionary     1870616\n254       Consumer Staples     1400955\n255 Information Technology      963283\n256              Utilities     3538982\n257 Information Technology     1733167\n258            Industrials     1287679\n259              Materials     4461923\n260              Utilities     5312109\n261            Real Estate     8226775\n262            Industrials     3914760\n263            Health Care     3594290\n264 Information Technology     1173766\n265              Materials     3457348\n266              Materials     3769475\n267            Health Care      798947\n268       Consumer Staples     3234016\n269             Financials     1547442\n270             Financials    11484608\n271 Information Technology     3067559\n272            Real Estate      717552\n273            Health Care      945392\n274            Industrials     2514572\n275             Financials     7283773\n276            Health Care      840888\n277            Industrials     3124053\n278              Materials    15837152\n279              Utilities     1971184\n280              Materials     5794860\n281            Industrials      939128\n282             Financials     5203126\n283 Consumer Discretionary      620090\n284             Financials     3889356\n285             Financials     1843857\n286 Communication Services     3693436\n287            Industrials     2381179\n288 Information Technology     1706564\n289              Utilities     2645846\n290            Health Care      274795\n291 Communication Services     2447402\n292            Health Care     3275280\n293             Financials    11353641\n294 Information Technology     2835577\n295            Industrials      851775\n296            Health Care     5629673\n297            Health Care      490005\n298                 Energy     1678142\n299              Utilities     1963267\n300              Utilities     2951350\n301            Real Estate     3452740\n302 Information Technology     3077792\n303       Consumer Staples     2656922\n304 Consumer Discretionary     1589238\n305       Consumer Staples     1324279\n306 Information Technology     1832858\n307             Financials      968497\n308            Health Care     1111794\n309       Consumer Staples     1526384\n310              Utilities     5366678\n311 Consumer Discretionary     1296049\n312 Information Technology     2038376\n313             Financials    11671771\n314 Information Technology     1608117\n315              Utilities     3092984\n316 Consumer Discretionary      268854\n317 Information Technology     1951800\n318              Materials     1436228\n319 Information Technology     7010013\n320            Real Estate     5240775\n321 Information Technology     3071238\n322            Health Care     1910436\n323 Information Technology      913731\n324                 Energy     9281057\n325                 Energy     2750316\n326             Financials     1978764\n327 Consumer Discretionary     5589458\n328            Industrials      496123\n329       Consumer Staples     2764699\n330            Industrials     4470119\n331 Consumer Discretionary     3187318\n332            Real Estate     1153852\n333            Health Care     1546184\n334 Consumer Discretionary     2574321\n335             Financials     1776056\n336            Health Care      545599\n337 Consumer Discretionary     1354233\n338            Health Care     1747146\n339 Information Technology     3176075\n340            Real Estate     8051085\n341 Consumer Discretionary     3730843\n342 Information Technology     1399057\n343            Industrials     2716830\n344 Information Technology      564156\n345            Health Care      532562\n346            Industrials     1613347\n347             Financials     2894667\n348            Health Care      512924\n349                 Energy     5141867\n350              Materials     1105247\n351             Financials     2363409\n352            Industrials     1953788\n353                 Energy     5547419\n354            Industrials     1305700\n355              Materials     1423524\n356 Communication Services    10379065\n357             Financials     3040086\n358             Financials      574548\n359 Information Technology      987044\n360             Financials     1652133\n361            Industrials     1902907\n362            Industrials     1516193\n363                 Energy     4152349\n364            Real Estate     1381347\n365            Health Care     2969890\n366 Consumer Discretionary      805121\n367              Utilities     3188619\n368            Real Estate     3022753\n369             Financials     2835503\n370            Health Care     1008799\n371 Consumer Discretionary     1069451\n372       Consumer Staples     5327094\n373 Information Technology     1569001\n374 Information Technology     2852071\n375            Health Care     1475566\n376              Materials      681336\n377 Consumer Discretionary     1325791\n378            Real Estate     1879215\n379            Real Estate     1235370\n380       Consumer Staples     2968258\n381 Information Technology     1272004\n382       Consumer Staples     1233183\n383              Materials     1540210\n384            Health Care      939188\n385 Consumer Discretionary     2399286\n386            Industrials     3355027\n387 Information Technology     1790425\n388              Utilities     1291661\n389       Consumer Staples     2044159\n390              Materials     3871360\n391              Materials     1453268\n392                 Energy     4147562\n393            Real Estate     1852404\n394            Industrials      903877\n395                 Energy     4818499\n396              Utilities     7182509\n397 Consumer Discretionary     1829183\n398 Consumer Discretionary     1935735\n399            Industrials     1113767\n400            Industrials     2206502\n401                 Energy     5235531\n402             Financials     1435488\n403 Communication Services     1241900\n404            Real Estate     3876499\n405              Utilities     2551075\n406             Financials     1216629\n407 Information Technology      664116\n408 Information Technology      846668\n409       Consumer Staples     1620658\n410            Health Care     1195097\n411 Consumer Discretionary     3124383\n412 Communication Services     3833174\n413                 Energy     4718422\n414 Consumer Discretionary     1276288\n415             Financials     1255942\n416            Real Estate     3124109\n417              Utilities     1214980\n418              Materials     2786398\n419 Communication Services     3930185\n420             Financials     3342977\n421 Consumer Discretionary     1191398\n422            Real Estate      794526\n423              Utilities     3967883\n424            Industrials      941785\n425             Financials     2122059\n426              Materials     2536327\n427            Health Care     2424846\n428            Health Care     1668249\n429            Industrials      472130\n430 Information Technology     3793694\n431                 Energy     1770424\n432            Industrials     3893577\n433              Materials     1024844\n434              Materials      946952\n435 Communication Services     4185522\n436            Industrials      616986\n437 Consumer Discretionary      696269\n438             Financials      446368\n439              Materials     1184371\n440 Consumer Discretionary      689241\n441 Consumer Discretionary     2282471\n442            Industrials     1037700\n443 Consumer Discretionary     1320464\n444 Consumer Discretionary      837593\n445             Financials     1132802\n446 Consumer Discretionary     3475186\n447 Information Technology      517747\n448       Consumer Staples     1832793\n449            Industrials     1334917\n450            Industrials     1296545\n451            Industrials     1339031\n452 Information Technology     1361089\n453 Information Technology     4880875\n454             Financials     2382921\n455            Real Estate      943705\n456            Real Estate     1710661\n457             Financials     4461157\n458 Consumer Discretionary     3326163\n459            Industrials     4695504\n460            Real Estate     4616746\n461            Health Care     1384655\n462 Consumer Discretionary     4746547\n463            Industrials     1573427\n464                 Energy     1035895\n465            Health Care     1884332\n466 Information Technology     1489880\n467 Consumer Discretionary     2851670\n468 Consumer Discretionary      615328\n469 Communication Services     2486454\n470            Industrials     1792505\n471 Consumer Discretionary     1275513\n472 Consumer Discretionary     4022810\n473 Information Technology     2428599\n474            Industrials     1552478\n475              Materials     1733776\n476 Consumer Discretionary     1627708\n477       Consumer Staples     2076504\n478             Financials     4066548\n479 Consumer Discretionary     2491820\n480            Industrials     1420509\n481                 Energy     1182082\n482 Consumer Discretionary     1816851\n483            Health Care     1372418\n484             Financials     3166258\n485            Industrials     1612804\n486 Consumer Discretionary     1436217\n487             Financials      583435\n488 Communication Services     1116383\n489 Information Technology      393061\n490 Consumer Discretionary     2391279\n491            Industrials     1606564\n492             Financials      575956\n493 Consumer Discretionary     1250523\n494            Industrials     1526223\n495             Financials     1302087\n496       Consumer Staples     4912631\n497 Consumer Discretionary     2224465\n498 Communication Services     4161396\n499 Consumer Discretionary     3735261\n500            Real Estate     1169252\n501 Communication Services     1694339\n502 Consumer Discretionary     2585962\n503 Consumer Discretionary     2019164\n504 Consumer Discretionary     2043966\n505 Communication Services     1244468\n506                 Energy      292529\n```\n:::\n:::\n\n\n\n# Question\n\n<mark>Which stock prices behave similarly?</mark>\n\nAnswering this question helps us __understand which companies are related__, and we can use clustering to help us answer it!\n\nEven if you're not interested in finance, this is still a great analysis because it will tell you which companies are competitors and which are likely in the same space (often called sectors) and can be categorized together. Bottom line - This analysis can help you better understand the dynamics of the market and competition, which is useful for all types of analyses from finance to sales to marketing.  \n\nLet's get started. \n\n## Step 1 - Convert stock prices to a standardized format (daily returns)\n\nWhat you first need to do is get the data in a format that can be converted to a \"user-item\" style matrix. The challenge here is to connect the dots between what we have and what we need to do to format it properly.\n\nWe know that in order to compare the data, it needs to be standardized or normalized. Why? Because we cannot compare values (stock prices) that are of completely different magnitudes. In order to standardize, we will convert from adjusted stock price (dollar value) to daily returns (percent change from previous day). Here is the formula. \n\n$$ \nreturn_{daily} = \\frac{price_{i}-price_{i-1}}{price_{i-1}}\n$$\n\nFirst, what do we have? We have stock prices for every stock in the [SP 500 Index](https://finance.yahoo.com/quote/%5EGSPC?p=%5EGSPC), which is the daily stock prices for over 500 stocks. The data set is over 1.2M observations. \n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-4_b54985ca245bb34b5b8b4beee2e7033b'}\n\n```{.r .cell-code}\nsp_500_prices_tbl %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1,225,765\nColumns: 8\n$ symbol   <chr> \"MSFT\", \"MSFT\", \"MSFT\", \"MSFT\", \"MSFT\", \"MSFT\", \"MSFT\", \"MSFT…\n$ date     <date> 2009-01-02, 2009-01-05, 2009-01-06, 2009-01-07, 2009-01-08, …\n$ open     <dbl> 19.53, 20.20, 20.75, 20.19, 19.63, 20.17, 19.71, 19.52, 19.53…\n$ high     <dbl> 20.40, 20.67, 21.00, 20.29, 20.19, 20.30, 19.79, 19.99, 19.68…\n$ low      <dbl> 19.37, 20.06, 20.61, 19.48, 19.55, 19.41, 19.30, 19.52, 19.01…\n$ close    <dbl> 20.33, 20.52, 20.76, 19.51, 20.12, 19.52, 19.47, 19.82, 19.09…\n$ volume   <dbl> 50084000, 61475200, 58083400, 72709900, 70255400, 49815300, 5…\n$ adjusted <dbl> 15.86624, 16.01451, 16.20183, 15.22628, 15.70234, 15.23408, 1…\n```\n:::\n:::\n\n\nYour first task is to convert to a tibble named `sp_500_daily_returns_tbl` by performing the following operations:\n\n- Select the `symbol`, `date` and `adjusted` columns\n- Filter to dates beginning in the year 2018 and beyond. \n- Compute a Lag of 1 day on the adjusted stock price. Be sure to group by symbol first, otherwise we will have lags computed using values from the previous stock in the data frame. \n- Remove a `NA` values from the lagging operation\n- Compute the difference between adjusted and the lag\n- Compute the percentage difference by dividing the difference by that lag. Name this column `pct_return`.\n- Return only the `symbol`, `date`, and `pct_return` columns\n- Save as a variable named `sp_500_daily_returns_tbl`\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-5_ce1215048a3a9d3b6d4c9f7c360cc249'}\n\n```{.r .cell-code}\n# Apply your data transformation skills!\nsp_500_daily_returns_tbl <- sp_500_prices_tbl %>%\n  select(symbol, date, adjusted) %>%\n  filter(date >= '2018-01-01' & date <= '2018-12-31') %>%\n  group_by(symbol) %>%\n  mutate(lag = lag(adjusted, n = 1, default = NA)) %>%\n  ungroup() %>%\n  drop_na() %>%\n  mutate(difference = adjusted - lag) %>%\n  mutate(pct_return = difference/lag) %>%\n  select(symbol, date, pct_return)\n\n# Output: sp_500_daily_returns_tbl\n```\n:::\n\n\n\n## Step 2 - Convert to User-Item Format\n\nThe next step is to convert to a user-item format with the `symbol` in the first column and every other column the value of the _daily returns_ (`pct_return`) for every stock at each `date`.\n\nWe're going to import the correct results first (just in case you were not able to complete the last step).\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-6_5c147653b1a8e4bd5463fcd29171ec9e'}\n\n```{.r .cell-code}\nsp_500_daily_returns_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/sp_500_daily_returns_tbl.rds\")\nsp_500_daily_returns_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 141,340 × 3\n   symbol date       pct_return\n   <chr>  <date>          <dbl>\n 1 MSFT   2018-01-03   0.00465 \n 2 MSFT   2018-01-04   0.00880 \n 3 MSFT   2018-01-05   0.0124  \n 4 MSFT   2018-01-08   0.00102 \n 5 MSFT   2018-01-09  -0.000680\n 6 MSFT   2018-01-10  -0.00453 \n 7 MSFT   2018-01-11   0.00296 \n 8 MSFT   2018-01-12   0.0173  \n 9 MSFT   2018-01-16  -0.0140  \n10 MSFT   2018-01-17   0.0203  \n# ℹ 141,330 more rows\n```\n:::\n:::\n\n\n\nNow that we have the daily returns (percentage change from one day to the next), we can convert to a user-item format. The user in this case is the `symbol` (company), and the item in this case is the `pct_return` at each `date`. \n\n- Spread the `date` column to get the values as percentage returns. Make sure to fill an `NA` values with zeros. \n- Save the result as `stock_date_matrix_tbl`\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-7_6e16cc4ee1e1e91c68f26330f30387d8'}\n\n```{.r .cell-code}\n# Convert to User-Item Format\nstock_date_matrix_tbl <- sp_500_daily_returns_tbl %>%\n  arrange(symbol) %>%\n  pivot_wider(names_from =date, values_from = pct_return, values_fill = 0)\n\nstock_date_matrix_tbl \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 502 × 283\n   symbol `2018-01-03` `2018-01-04` `2018-01-05` `2018-01-08` `2018-01-09`\n   <chr>         <dbl>        <dbl>        <dbl>        <dbl>        <dbl>\n 1 A          0.0254       -0.00750     0.0160        0.00215     0.0246  \n 2 AAL       -0.0123        0.00630    -0.000380     -0.00988    -0.000959\n 3 AAP        0.00905       0.0369      0.0106       -0.00704    -0.00808 \n 4 AAPL      -0.000174      0.00465     0.0114       -0.00371    -0.000115\n 5 ABBV       0.0156       -0.00570     0.0174       -0.0160      0.00754 \n 6 ABC        0.00372      -0.00222     0.0121        0.0166      0.00640 \n 7 ABMD       0.0173        0.0175      0.0154        0.0271      0.00943 \n 8 ABT        0.00221      -0.00170     0.00289      -0.00288     0.00170 \n 9 ACN        0.00462       0.0118      0.00825       0.00799     0.00333 \n10 ADBE       0.0188        0.0120      0.0116       -0.00162     0.00897 \n# ℹ 492 more rows\n# ℹ 277 more variables: `2018-01-10` <dbl>, `2018-01-11` <dbl>,\n#   `2018-01-12` <dbl>, `2018-01-16` <dbl>, `2018-01-17` <dbl>,\n#   `2018-01-18` <dbl>, `2018-01-19` <dbl>, `2018-01-22` <dbl>,\n#   `2018-01-23` <dbl>, `2018-01-24` <dbl>, `2018-01-25` <dbl>,\n#   `2018-01-26` <dbl>, `2018-01-29` <dbl>, `2018-01-30` <dbl>,\n#   `2018-01-31` <dbl>, `2018-02-01` <dbl>, `2018-02-02` <dbl>, …\n```\n:::\n\n```{.r .cell-code}\n# Output: stock_date_matrix_tbl\n```\n:::\n\n\n\n\n## Step 3 - Perform K-Means Clustering\n\nNext, we'll perform __K-Means clustering__. \n\nWe're going to import the correct results first (just in case you were not able to complete the last step).\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-8_a71f6a44a439840ecfe3f42638bc0a87'}\n\n```{.r .cell-code}\nstock_date_matrix_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/stock_date_matrix_tbl.rds\")\n```\n:::\n\n\nBeginning with the `stock_date_matrix_tbl`, perform the following operations:\n\n- Drop the non-numeric column, `symbol`\n- Perform `kmeans()` with `centers = 4` and `nstart = 20`\n- Save the result as `kmeans_obj`\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-9_ea4e43dcf7e53d653ab4ee21d9e51905'}\n\n```{.r .cell-code}\n# Create kmeans_obj for 4 centers\nkmeans_obj <- stock_date_matrix_tbl %>%\n  select(-symbol) %>%\n  kmeans(centers = 4, nstart = 20)\n```\n:::\n\n\nUse `glance()` to get the `tot.withinss`. \n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-10_35379582bbf2a36f2321072a8b0de2db'}\n\n```{.r .cell-code}\n# Apply glance() to get the tot.withinss\nbroom::glance(kmeans_obj)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 4\n  totss tot.withinss betweenss  iter\n  <dbl>        <dbl>     <dbl> <int>\n1  33.6         29.2      4.40     3\n```\n:::\n:::\n\n\n## Step 4 - Find the optimal value of K\n\nNow that we are familiar with the process for calculating `kmeans()`, let's use `purrr` to iterate over many values of \"k\" using the `centers` argument. \n\nWe'll use this __custom function__ called `kmeans_mapper()`:\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-11_52735e48ce584b21a9aa79926587ee9d'}\n\n```{.r .cell-code}\nkmeans_mapper <- function(center = 3) {\n    stock_date_matrix_tbl %>%\n        select(-symbol) %>%\n        kmeans(centers = center, nstart = 20)\n}\n```\n:::\n\n\nApply the `kmeans_mapper()` and `glance()` functions iteratively using `purrr`.\n\n- Create a tibble containing column called `centers` that go from 1 to 30\n- Add a column named `k_means` with the `kmeans_mapper()` output. Use `mutate()` to add the column and `map()` to map centers to the `kmeans_mapper()` function.\n- Add a column named `glance` with the `glance()` output. Use `mutate()` and `map()` again to iterate over the column of `k_means`.\n- Save the output as `k_means_mapped_tbl` \n\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-12_351b9f9f45107161fdb5c472349660dc'}\n\n```{.r .cell-code}\n# Use purrr to map\nkmeans_mapped_tbl <- tibble(centers = 1:30) %>%\n    mutate(k_means = centers %>% map(kmeans_mapper)) %>%\n    mutate(glance  = k_means %>% map(glance))\n\n# Output: k_means_mapped_tbl \n```\n:::\n\n\nNext, let's visualize the \"tot.withinss\" from the glance output as a ___Scree Plot___. \n\n- Begin with the `k_means_mapped_tbl`\n- Unnest the `glance` column\n- Plot the `centers` column (x-axis) versus the `tot.withinss` column (y-axis) using `geom_point()` and `geom_line()`\n- Add a title \"Scree Plot\" and feel free to style it with your favorite theme\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-13_5051b91cf77fcd2e117c0df0c1edfc72'}\n\n```{.r .cell-code}\n# Visualize Scree Plot\nkmeans_mapped_tbl %>%\n    unnest(glance) %>%\n    select(centers, tot.withinss) %>%\n    \n    # Visualization\n    ggplot(aes(centers, tot.withinss)) +\n    geom_point(color = \"#2DC6D6\", size = 4) +\n    geom_line(color = \"#2DC6D6\", size = 1) \n```\n\n::: {.cell-output-display}\n![](Chapter_1_Challenge_fahad_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nWe can see that the Scree Plot becomes linear (constant rate of change) between 5 and 10 centers for K.\n\n\n## Step 5 - Apply UMAP\n\nNext, let's plot the `UMAP` 2D visualization to help us investigate cluster assignments. \n\n\nWe're going to import the correct results first (just in case you were not able to complete the last step).\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-14_4797b83b710eb218c6b370f6fe42b659'}\n\n```{.r .cell-code}\nk_means_mapped_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/k_means_mapped_tbl.rds\")\nk_means_mapped_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 30 × 3\n   centers k_means  glance          \n     <int> <list>   <list>          \n 1       1 <kmeans> <tibble [1 × 4]>\n 2       2 <kmeans> <tibble [1 × 4]>\n 3       3 <kmeans> <tibble [1 × 4]>\n 4       4 <kmeans> <tibble [1 × 4]>\n 5       5 <kmeans> <tibble [1 × 4]>\n 6       6 <kmeans> <tibble [1 × 4]>\n 7       7 <kmeans> <tibble [1 × 4]>\n 8       8 <kmeans> <tibble [1 × 4]>\n 9       9 <kmeans> <tibble [1 × 4]>\n10      10 <kmeans> <tibble [1 × 4]>\n# ℹ 20 more rows\n```\n:::\n:::\n\n\nFirst, let's apply the `umap()` function to the `stock_date_matrix_tbl`, which contains our user-item matrix in tibble format.\n\n- Start with `stock_date_matrix_tbl`\n- De-select the `symbol` column\n- Use the `umap()` function storing the output as `umap_results`\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-15_28b262a87eff419f8b1d701589b63ab3'}\n\n```{.r .cell-code}\n# Apply UMAP\numap_results <- stock_date_matrix_tbl %>%\n  select(-symbol) %>%\n  umap()\n# Store results as: umap_results \n```\n:::\n\n\nNext, we want to combine the `layout` from the `umap_results` with the `symbol` column from the `stock_date_matrix_tbl`.\n\n- Start with `umap_results$layout`\n- Convert from a `matrix` data type to a `tibble` with `as_tibble()`\n- Bind the columns of the umap tibble with the `symbol` column from the `stock_date_matrix_tbl`.\n- Save the results as `umap_results_tbl`.\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-16_9572cbd46a926ef0c2e3f43a2c2d00f3'}\n\n```{.r .cell-code}\n# Convert umap results to tibble with symbols\numap_results_tbl <- umap_results$layout %>%\n  as_tibble() %>%\n  cbind(stock_date_matrix_tbl$symbol)\n  \numap_results_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n               V1          V2 stock_date_matrix_tbl$symbol\n1   -0.8950983551  1.62758702                            A\n2    0.5639097664  0.58689220                          AAL\n3    0.2272660665 -0.51968656                          AAP\n4   -2.1735899638  2.37919970                         AAPL\n5   -0.8406398229 -0.13028244                         ABBV\n6   -0.4255808717 -0.97105476                          ABC\n7   -2.4887588000  2.31319932                         ABMD\n8   -1.2237252946  1.20898354                          ABT\n9   -1.5184602617  1.53752624                          ACN\n10  -2.7228290215  2.64755066                         ADBE\n11  -1.0655343114  3.30855142                          ADI\n12  -0.0638029262 -0.84727447                          ADM\n13  -2.0176102684  1.65951621                          ADP\n14  -0.7954293661  1.32641729                          ADS\n15  -2.7637573653  2.55255858                         ADSK\n16   1.9326961315 -5.02738171                          AEE\n17   1.7493296737 -4.98468752                          AEP\n18   2.1040830811 -4.78167073                          AES\n19  -1.2118188407 -1.03874686                          AFL\n20  -1.4505585506 -1.16842981                          AGN\n21  -1.3896149274 -1.38281790                          AIG\n22   4.9821658345 -3.65183375                          AIV\n23  -1.2947092756 -1.32607204                          AIZ\n24  -0.9296202103 -0.71331736                          AJG\n25  -1.9825480494  1.65325287                         AKAM\n26   0.3573329282  2.51094018                          ALB\n27  -2.7327135325  2.59087794                         ALGN\n28   0.4817821229  0.61657724                          ALK\n29  -1.3192257447 -0.84840915                          ALL\n30   0.0814157782  1.43647893                         ALLE\n31  -1.9564391634  2.20554847                         ALXN\n32  -0.9221536908  3.58029763                         AMAT\n33  -2.7744994370  2.56040110                          AMD\n34   0.2586006628  1.92951277                          AME\n35  -1.9228130148 -1.98250754                          AMG\n36  -0.9850238819 -0.21436984                         AMGN\n37  -1.7002766201 -2.25581285                          AMP\n38   4.6582276609 -3.92364682                          AMT\n39  -2.5466834486  2.80756082                         AMZN\n40  -2.6077778776  2.43047915                         ANET\n41  -2.5646078362  2.36940124                         ANSS\n42  -1.6817589672  0.44604516                         ANTM\n43  -1.0864704892 -0.80265553                          AON\n44   0.7861177610  1.40922902                          AOS\n45   4.2483382765  2.35743640                          APA\n46   4.3621613063  2.53688325                          APC\n47  -0.0720907611  1.96752680                          APD\n48  -0.7818445473  1.84538426                          APH\n49   0.0689854642  2.24117467                         APTV\n50   5.0790484280 -3.56011779                          ARE\n51   0.6923346727  1.43046537                         ARNC\n52   1.9127419376 -4.91465757                          ATO\n53  -2.3792224236  2.89861476                         ATVI\n54   4.8292766673 -3.55921363                          AVB\n55  -0.8767582744  1.97544505                         AVGO\n56   0.1062484119  1.78563796                          AVY\n57   1.9453138168 -4.87094289                          AWK\n58  -2.0318301623 -1.67413461                          AXP\n59   0.2494214335 -0.57641350                          AZO\n60  -0.3301772950  1.68133655                           BA\n61  -2.3065492686 -2.06475139                          BAC\n62  -0.9605050591  1.21419767                          BAX\n63  -2.6813932500 -2.30954500                          BBT\n64   0.6684431926 -0.07707123                          BBY\n65  -1.1077508394  1.19740214                          BDX\n66  -1.8990103063 -2.04488828                          BEN\n67  -1.6617087328 -2.40783485                          BHF\n68   4.0125881765  2.24280457                         BHGE\n69  -1.0545053200 -0.16043230                         BIIB\n70  -2.2969999123 -2.41563872                           BK\n71  -1.6392891754  1.82171663                         BKNG\n72  -1.9971976395 -1.96841934                          BLK\n73  -0.8234601401  0.06392157                          BLL\n74  -0.8532026559 -0.04914181                          BMY\n75  -1.8231893153  1.38828833                           BR\n76  -1.0900567032  1.38488962                          BSX\n77   0.0005469726  2.34169595                          BWA\n78   4.8672866149 -3.67443739                          BXP\n79  -2.1403318631 -1.92235316                            C\n80   1.0880002672 -3.16906058                          CAG\n81  -0.4063515173 -0.96625885                          CAH\n82   0.7623609977  2.28139295                          CAT\n83  -1.1144810744 -1.05199731                           CB\n84  -1.5398677260 -0.80847435                         CBOE\n85  -0.1539461388  2.02504180                         CBRE\n86  -0.6230670903 -1.33190535                          CBS\n87   4.4864078296 -4.08881827                          CCI\n88  -2.4171576278  2.22847468                         CDNS\n89   0.2927935478  2.61479516                           CE\n90  -1.0921747254 -0.09302906                         CELG\n91  -1.4064708473  0.45513488                         CERN\n92   0.2325902351  2.92490474                           CF\n93  -2.8000097745 -2.27137355                          CFG\n94   1.5905797489 -3.61634440                          CHD\n95  -0.1316997885  0.94234925                         CHRW\n96  -0.6541533741 -1.52760891                         CHTR\n97  -1.5175579741  0.44949233                           CI\n98  -1.1052249763 -1.09650863                         CINF\n99   1.5235221334 -3.13665627                           CL\n100  1.5899105775 -3.55836181                          CLX\n101 -2.9206799640 -2.36662813                          CMA\n102 -0.5501256956 -1.62218704                        CMCSA\n103 -1.5922092505 -0.80913710                          CME\n104 -0.0356375992 -0.25246383                          CMG\n105  0.6733515057  2.18817248                          CMI\n106  1.9329035053 -4.96981903                          CMS\n107 -1.7517233356  0.67423367                          CNC\n108  1.8068820369 -4.76113771                          CNP\n109 -2.1808292868 -1.68991090                          COF\n110  3.6327216385  2.07428738                          COG\n111 -1.1099730813  1.17099721                          COO\n112  4.2194537829  2.37597839                          COP\n113  0.1694001701 -0.77014910                         COST\n114  0.7394736118 -2.10968320                         COTY\n115  1.1444174754 -3.30170403                          CPB\n116 -0.2510421207  1.46279413                         CPRI\n117 -1.6054762725  1.19423153                         CPRT\n118 -2.7625246000  2.64448939                          CRM\n119 -1.8493042147  2.34537760                         CSCO\n120  0.0976558207  0.89999890                          CSX\n121 -1.1649410681  1.00584471                         CTAS\n122 -0.0425580991 -1.80746941                          CTL\n123 -1.6096566020  1.44680755                         CTSH\n124 -1.0129350159  0.54584440                         CTXS\n125 -0.4865244571 -0.83886240                          CVS\n126  3.9886994886  2.24147539                          CVX\n127  4.3768046998  2.39350241                          CXO\n128  1.6658544629 -5.06469836                            D\n129  0.5987997432  0.52700287                          DAL\n130  0.6753990549  2.22196043                           DE\n131 -2.0262437562 -1.67208486                          DFS\n132  0.8221053586 -0.46022087                           DG\n133 -0.9322330714 -0.46012372                          DGX\n134  1.1245409411  0.69394254                          DHI\n135 -1.2424624036  1.14445859                          DHR\n136 -0.4518147187 -1.35703956                          DIS\n137 -0.6020592607 -1.49195918                        DISCA\n138 -0.6890387516 -1.51501709                        DISCK\n139 -0.4904402879 -1.67671897                         DISH\n140  4.9062960222 -3.61583883                          DLR\n141  0.5088028846 -0.66928897                         DLTR\n142  0.2932639942  1.69335425                          DOV\n143  5.0999689629 -3.65392860                          DRE\n144 -1.2823971064 -0.24921011                          DRI\n145  2.0343608186 -4.99478509                          DTE\n146  1.8011209874 -4.91452659                          DUK\n147 -1.6471311709 -0.14147620                          DVA\n148  4.4993298044  2.55852115                          DVN\n149  0.3881561122  2.64768661                         DWDP\n150 -1.5901687765  1.02890700                          DXC\n151 -2.4444171212  2.79174858                           EA\n152 -0.7287029702  1.18712140                         EBAY\n153 -0.6416117866  0.09689178                          ECL\n154  1.6958553277 -5.06478545                           ED\n155 -0.9656103770 -0.56325918                          EFX\n156  1.7837322380 -5.21940780                          EIX\n157 -1.0930760106  0.61248180                           EL\n158  0.1609570678  2.76147893                          EMN\n159  0.4815962838  1.97255356                          EMR\n160  4.4022531072  2.34824409                          EOG\n161  4.7326829840 -3.58884989                         EQIX\n162  4.7872506198 -3.60280619                          EQR\n163  1.8669747708 -4.92119019                           ES\n164  5.1461924360 -3.44055462                          ESS\n165 -2.5312667783 -2.05763386                         ETFC\n166  0.4134513728  2.02596238                          ETN\n167  1.8728877027 -4.91690877                          ETR\n168  1.7217541217 -4.64601191                         EVRG\n169 -2.4015094764  2.12530581                           EW\n170  1.7636790513 -4.69056316                          EXC\n171  0.0361432115  1.17488149                         EXPD\n172 -1.2950381863  1.67571342                         EXPE\n173  4.9913393200 -3.44787516                          EXR\n174 -1.6364873374 -1.48229123                            F\n175  4.3671490684  2.40210772                         FANG\n176 -0.9512773711  0.51661839                         FAST\n177 -2.5907731528  2.95967632                           FB\n178  0.8911653200  1.06557867                         FBHS\n179  0.5098069981  2.57127230                          FCX\n180 -0.1392888355  0.77752890                          FDX\n181  1.8287404724 -4.96319293                           FE\n182 -1.9695396836  1.69534438                         FFIV\n183 -1.6746783029  1.14460335                          FIS\n184 -1.7281257457  0.89484115                         FISV\n185 -2.9095895398 -2.40954510                         FITB\n186  0.5872173754 -0.03982836                           FL\n187 -0.7440158746  2.17779296                         FLIR\n188  1.0512689267  1.93747575                          FLR\n189  0.2998135065  1.97181096                          FLS\n190 -2.1647138254  1.91793918                          FLT\n191  0.3436305677  2.67482589                          FMC\n192 -0.2806971186 -1.19491576                          FOX\n193 -0.3057232498 -1.06838889                         FOXA\n194 -2.5417711000 -2.02047711                          FRC\n195  5.0048226978 -3.52797084                          FRT\n196  4.2597211972  2.23353766                          FTI\n197 -2.3848590303  2.26544154                         FTNT\n198  0.0231207025  1.88508428                          FTV\n199  1.3508404344  2.53266642                           GD\n200 -1.2497363566 -1.28721083                           GE\n201 -1.2035947077 -0.03168749                         GILD\n202  1.1451313708 -3.29744627                          GIS\n203 -0.0781178821  1.86217773                          GLW\n204 -1.7269915850 -1.57311413                           GM\n205 -2.3977049990  2.80564002                         GOOG\n206 -2.3618112354  2.83113748                        GOOGL\n207  0.2829398219 -0.65111191                          GPC\n208 -2.2281697594  2.08020572                          GPN\n209  0.8306592919 -0.43764283                          GPS\n210 -0.6809905420  0.70674809                         GRMN\n211 -2.3369706550 -1.91159322                           GS\n212  0.1083853148  2.50085253                           GT\n213 -0.9425404174  0.69642135                          GWW\n214  4.1492139942  2.16528913                          HAL\n215 -1.5030291453  0.15960794                          HAS\n216 -3.0021269968 -2.49568544                         HBAN\n217 -2.8166820897 -2.30190251                          HBI\n218 -0.2406788435 -0.07285362                          HCA\n219  5.1596982903 -3.87438361                          HCP\n220  0.6610101993 -0.06971445                           HD\n221  4.4936545081  2.55800649                          HES\n222  3.3648524759  1.93519206                          HFC\n223 -1.3339884928 -1.24803997                          HIG\n224  1.3902365850  2.61108043                          HII\n225 -1.2526566506  1.92062387                          HLT\n226 -1.6237712557 -1.91469099                          HOG\n227 -1.1731449807  1.22278089                         HOLX\n228 -0.3239321253  1.14667597                          HON\n229  4.3078032651  2.30179113                           HP\n230 -1.3993429058  2.57735672                          HPE\n231 -1.3406151246  2.79584372                          HPQ\n232 -0.9271990684  0.13554817                          HRB\n233  1.1139029370 -3.06365412                          HRL\n234  1.2642987616  2.44202061                          HRS\n235 -0.6022384843  0.47888894                         HSIC\n236  4.8332728121 -3.65189708                          HST\n237  1.1181531099 -3.37887233                          HSY\n238 -1.7884102050  0.33652800                          HUM\n239 -1.3142168176  0.79277525                          IBM\n240 -1.6481573818 -0.76963106                          ICE\n241 -2.2016067727  2.48114764                         IDXX\n242  0.6106812089 -2.06697669                          IFF\n243 -2.1568749272  2.46238009                         ILMN\n244 -1.7601072625  2.54321685                         INCY\n245 -1.4899956846  1.21047738                         INFO\n246 -1.2225092357  3.11582667                         INTC\n247 -2.3921800820  2.38133325                         INTU\n248  0.6827014571  2.15484359                           IP\n249 -0.8106496715 -1.24119923                          IPG\n250 -0.6808311925  2.73041932                         IPGP\n251 -1.2772006482  1.49521757                          IQV\n252  0.0701910068  1.58042803                           IR\n253  4.9372143252 -3.75248370                          IRM\n254 -2.7292286487  2.59282769                         ISRG\n255 -1.8539721327  1.14153465                           IT\n256  0.4711418579  1.87958978                          ITW\n257 -1.8925866515 -2.08794587                          IVZ\n258  0.1119531108  0.78896587                         JBHT\n259  0.1122937719  1.08287817                          JCI\n260  0.2968461204  1.49523864                          JEC\n261 -2.1660307904 -1.69714464                          JEF\n262 -1.8614890998  1.00412189                         JKHY\n263 -0.3329498186 -0.22895371                          JNJ\n264 -1.8398764413  1.28251714                         JNPR\n265 -2.1366214321 -1.80788633                          JPM\n266  0.8364865949 -0.41535306                          JWN\n267  1.1944463397 -3.24012448                            K\n268 -3.0210908273 -2.51436401                          KEY\n269 -2.1541549531  1.85932004                         KEYS\n270  1.1222114522 -3.04812405                          KHC\n271  4.9174822890 -3.63795683                          KIM\n272 -0.9319924718  3.59692851                         KLAC\n273  1.6208386981 -3.69945766                          KMB\n274  3.7483457530  2.10761699                          KMI\n275  0.1857335716 -0.03870181                          KMX\n276  1.0127477089 -2.56709342                           KO\n277  0.4171104518 -0.96131076                           KR\n278  0.9064480788 -0.42428685                          KSS\n279  0.1640055972  0.91581228                          KSU\n280 -1.1826612335 -1.47377889                            L\n281  0.8198814406 -0.51911432                           LB\n282  0.8304161344  0.94117942                          LEG\n283  1.1940392881  0.70270098                          LEN\n284 -0.9481971920 -0.52664655                           LH\n285 -0.3581028354  0.39384326                          LIN\n286  0.1452925703  1.47420764                          LKQ\n287  1.2289643824  2.38818824                          LLL\n288 -0.7097685721 -0.14346305                          LLY\n289  1.4169106022  2.57848491                          LMT\n290 -1.6642051652 -2.36010645                          LNC\n291  1.9400751447 -4.83938121                          LNT\n292  0.3547759668  0.14985326                          LOW\n293 -0.9499008146  3.56861983                         LRCX\n294  0.6882689503  0.42391978                          LUV\n295 -0.4250506827 -0.05858569                           LW\n296  0.3448331893  2.82289749                          LYB\n297  0.9654618802 -0.30273874                            M\n298 -2.4488758602  2.55369356                           MA\n299  5.0376018706 -3.73083692                          MAA\n300  4.7000235173 -3.36924214                          MAC\n301 -1.2806214353  1.95068401                          MAR\n302  0.8055260355  1.21638648                          MAS\n303 -2.0892730647  0.70284452                          MAT\n304 -0.9169700409 -0.25836968                          MCD\n305 -1.0094747228  3.38967174                         MCHP\n306 -0.3844133389 -0.89996013                          MCK\n307 -2.2784490710  1.44009772                          MCO\n308  1.0558569026 -2.72339266                         MDLZ\n309 -1.1468159757  0.98374689                          MDT\n310 -1.6077863055 -2.37058351                          MET\n311 -0.3538941224  2.24296162                          MGM\n312  0.8808231999  0.99181518                          MHK\n313  0.9898574524 -2.95947793                          MKC\n314  0.7192940383  1.32175339                          MLM\n315 -0.8131014605 -0.83853395                          MMC\n316  0.2453129191  1.90617877                          MMM\n317 -1.6645721889  0.19115981                         MNST\n318  1.3364319806 -2.68717503                           MO\n319  0.2628324134  2.92118737                          MOS\n320  3.3494280629  1.92959314                          MPC\n321 -0.5935426313 -0.31832597                          MRK\n322  4.2631163737  2.50213142                          MRO\n323 -2.1143174775 -2.05314270                           MS\n324 -2.3149848665  1.68226089                         MSCI\n325 -2.3122827319  2.55653632                         MSFT\n326 -1.9153119224  0.81024548                          MSI\n327 -2.8175501124 -2.32248581                          MTB\n328 -0.9440641490  1.56809299                          MTD\n329 -0.9655288862  3.48733910                           MU\n330 -1.1966338273  3.19075222                         MXIM\n331 -2.1420659456 -1.45262821                          MYL\n332  4.4595168776  2.51051153                          NBL\n333 -1.2052601230  2.03739468                         NCLH\n334 -1.6905384758 -0.82115122                         NDAQ\n335  1.9730853484 -4.78799794                          NEE\n336 -0.3580474441 -0.47596809                          NEM\n337 -2.5476834213  2.73832156                         NFLX\n338  1.7939943792 -4.78768426                           NI\n339 -0.5695438806  1.33144244                          NKE\n340 -1.2349588536  1.73223225                         NKTR\n341 -1.7051242967 -1.34596630                         NLSN\n342  1.3811742108  2.51733075                          NOC\n343  4.3202342976  2.18463226                          NOV\n344  1.9078782385 -4.30607151                          NRG\n345  0.2557001862  1.05716473                          NSC\n346 -2.0192291576  2.48031410                         NTAP\n347 -2.1474107041 -2.21301391                         NTRS\n348  0.1857795278  2.24665680                          NUE\n349 -2.7355197434  2.48053049                         NVDA\n350  0.1464908691  0.43812731                          NWL\n351 -0.7196392095  1.88420140                          NWS\n352 -0.7859355580  1.93568870                         NWSA\n353  5.0580276417 -3.77075598                            O\n354  3.8502141893  2.26157186                          OKE\n355 -0.8487274988 -1.26622609                          OMC\n356 -0.7045220253  1.56774934                         ORCL\n357  0.2902755481 -0.47101438                         ORLY\n358  3.9589498825  2.25206203                          OXY\n359 -1.3552428910  0.49041354                         PAYX\n360 -2.6067420515 -2.07704622                         PBCT\n361  0.7549385842  2.23123636                         PCAR\n362  2.0430132719 -4.81656955                          PEG\n363  1.4601742152 -2.86907375                          PEP\n364 -0.7777841015 -0.14604091                          PFE\n365 -1.6445549767 -2.32143946                          PFG\n366  1.4787090410 -3.05680963                           PG\n367 -1.3855503773 -0.69528761                          PGR\n368  0.7964508912  2.20849270                           PH\n369  1.1623964305  0.68917570                          PHM\n370  0.6234911072  1.90557250                          PKG\n371 -1.1370647192  1.84038687                          PKI\n372  4.9649275810 -3.74977512                          PLD\n373  1.5047606370 -2.77046507                           PM\n374 -2.5612967525 -2.24626862                          PNC\n375  0.7166311906  1.81433855                          PNR\n376  1.9983208717 -4.78872866                          PNW\n377  0.2054440984  2.60852387                          PPG\n378  1.7528916799 -5.18462764                          PPL\n379 -1.3065689785 -1.71085163                         PRGO\n380 -1.6283279572 -2.28049422                          PRU\n381  5.0211541957 -3.46946936                          PSA\n382  3.5770430987  2.06775216                          PSX\n383 -0.2603934817  1.66686972                          PVH\n384  0.3490114860  2.21366734                          PWR\n385  4.3575175352  2.40728357                          PXD\n386 -2.2999299808  2.49711664                         PYPL\n387 -0.2939437165  1.91408358                         QCOM\n388 -1.2042806539  3.26035628                         QRVO\n389 -1.4544458262  2.10684174                          RCL\n390 -1.2424132936 -1.10063588                           RE\n391  4.8132432024 -3.48148402                          REG\n392 -1.3665174424  0.85223805                         REGN\n393 -2.9860870287 -2.42005520                           RF\n394 -1.8901139082  2.05594038                          RHI\n395 -1.4343599107  0.29791896                          RHT\n396 -2.2466055677 -2.16270801                          RJF\n397 -0.3798240690  1.43051090                           RL\n398 -1.3121736211  1.15056122                          RMD\n399  0.4851451534  2.10609642                          ROK\n400 -1.4541482223  0.71212773                          ROL\n401  0.3925232039  1.60178827                          ROP\n402  0.7962345013 -0.40848347                         ROST\n403 -0.6954610469 -0.53894480                          RSG\n404  1.4097818806  2.56495347                          RTN\n405  4.5220232946 -4.05968149                         SBAC\n406 -0.9142304518  0.35335486                         SBUX\n407 -2.2816001663 -2.12256661                         SCHW\n408 -0.8192657869 -0.55033060                          SEE\n409  0.4088489533  1.53186738                          SHW\n410 -2.8428356409 -2.28420735                         SIVB\n411  1.1016904655 -3.26443054                          SJM\n412  4.1079377488  2.16002253                          SLB\n413  4.9300299938 -3.78280697                          SLG\n414 -0.1331578204  1.31602892                          SNA\n415 -2.5155007533  2.14879809                         SNPS\n416  1.7082288835 -4.85595989                           SO\n417  4.8502794527 -3.44282727                          SPG\n418 -2.3074672078  1.49501738                         SPGI\n419  1.8584702662 -4.86436745                          SRE\n420 -3.0646933420 -2.45453678                          STI\n421 -2.2028476606 -2.44547074                          STT\n422 -1.0420015267  2.81220154                          STX\n423 -0.9817982100  0.34745755                          STZ\n424  0.7844699961  1.72246456                          SWK\n425 -1.0915623885  3.36763463                         SWKS\n426 -2.4140090923 -1.85825537                          SYF\n427 -1.5292749198  0.99528112                          SYK\n428 -0.6816661801  1.89923056                         SYMC\n429 -0.3420224209 -0.62852480                          SYY\n430 -0.2361893959 -1.70746140                            T\n431  1.0704639775 -2.82833491                          TAP\n432 -0.1613308527  1.80031253                          TDG\n433 -0.3587399413  2.39265057                          TEL\n434 -1.0040159173  1.38534380                          TFX\n435  0.9331351603 -0.40590005                          TGT\n436 -0.3889148251  1.35821354                          TIF\n437  0.6521625344 -0.28742995                          TJX\n438 -1.5688749028 -1.42770557                          TMK\n439 -0.8747649436  1.61843558                          TMO\n440 -0.3877729083  1.87322283                          TPR\n441 -2.7342452213  2.11167362                         TRIP\n442 -1.8679752879 -1.86583149                         TROW\n443 -1.2069174225 -1.14154500                          TRV\n444  0.5253784741 -0.24394923                         TSCO\n445  1.0149272262 -2.93489062                          TSN\n446 -2.1310090381  1.91217623                          TSS\n447 -2.3828310624  2.95070311                         TTWO\n448 -2.5569915147  2.97845894                         TWTR\n449 -1.1608606206  3.23098516                          TXN\n450  0.6343059148  2.07014927                          TXT\n451 -0.2775930724  0.99034380                           UA\n452 -0.1701439150  0.94713071                          UAA\n453  0.5338369548  0.50326466                          UAL\n454  5.1473766132 -3.47582343                          UDR\n455 -0.2234391663 -0.22847438                          UHS\n456 -0.6108940668  0.00904055                         ULTA\n457 -1.7279360595  0.49590585                          UNH\n458 -1.5882150841 -2.38364312                          UNM\n459  0.1672669356  0.90652203                          UNP\n460 -0.1384505871  0.45713306                          UPS\n461  0.8388980876  2.23516102                          URI\n462 -1.7615622091 -1.38449891                          USB\n463  0.7005136651  1.78593073                          UTX\n464 -2.0448525690  2.28320469                            V\n465 -0.9994829470  1.70048284                          VAR\n466 -0.4001487791  0.99921882                          VFC\n467 -0.7542003061 -1.34360989                         VIAB\n468  3.3718836685  1.95059116                          VLO\n469  0.7020601599  1.35943587                          VMC\n470  4.9000498898 -3.84297307                          VNO\n471 -1.2614420351  0.57502960                         VRSK\n472 -2.1934774790  2.09389763                         VRSN\n473 -1.9653304062  2.18809762                         VRTX\n474  5.3191096990 -3.81472639                          VTR\n475  0.9283564474 -2.45546653                           VZ\n476 -0.8802451482  1.50402668                          WAT\n477 -0.2114960176 -0.95684316                          WBA\n478 -1.8345967219  0.48403027                          WCG\n479 -0.8629925656  2.90908356                          WDC\n480  1.8692054481 -4.81069015                          WEC\n481  5.1942167884 -3.88774902                         WELL\n482 -2.3641590582 -1.78574631                          WFC\n483  0.7694253990  0.95034225                          WHR\n484 -1.0740760396 -0.73403459                         WLTW\n485 -0.4133213451 -0.50041516                           WM\n486  3.8049792289  2.17326085                          WMB\n487  0.3828627941 -0.96521841                          WMT\n488  0.4946053530  1.95954435                          WRK\n489 -0.9730887380  0.31610120                           WU\n490  4.9593354620 -3.86387415                           WY\n491 -0.2846099133  2.50923816                         WYNN\n492  4.4323277090  2.45859587                          XEC\n493  1.7775907270 -4.75542800                          XEL\n494 -1.0738079956  3.34433585                         XLNX\n495  3.8326882667  2.29492413                          XOM\n496 -0.8667839641  0.61139107                         XRAY\n497 -0.2548600028  0.62905103                          XRX\n498  0.3948884531  1.83091597                          XYL\n499 -1.1422708673  0.14442004                          YUM\n500 -1.0060307958  0.87678992                          ZBH\n501 -2.9720142932 -2.44656264                         ZION\n502 -0.9553956063  0.76738181                          ZTS\n```\n:::\n\n```{.r .cell-code}\n# Output: umap_results_tbl\n```\n:::\n\n\nFinally, let's make a quick visualization of the `umap_results_tbl`.\n\n- Pipe the `umap_results_tbl` into `ggplot()` mapping the columns to x-axis and y-axis\n- Add a `geom_point()` geometry with an `alpha = 0.5`\n- Apply `theme_tq()` and add a title \"UMAP Projection\"\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-17_6d1712cdf558b1152e33d9a26637f52a'}\n\n```{.r .cell-code}\n# Visualize UMAP results\numap_results_tbl %>%\n  ggplot(mapping = aes(x = V1, y = V2)) +\n  geom_point(alpha = 0.5) +\n  theme_tq() +\n  ggtitle(\"UMAP Projection\")\n```\n\n::: {.cell-output-display}\n![](Chapter_1_Challenge_fahad_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nWe can now see that we have some clusters. However, we still need to combine the K-Means clusters and the UMAP 2D representation. \n\n\n\n## Step 6 - Combine K-Means and UMAP\n\nNext, we combine the K-Means clusters and the UMAP 2D representation\n\nWe're going to import the correct results first (just in case you were not able to complete the last step).\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-18_43fc85c7969dd8f5efb06775dfed349f'}\n\n```{.r .cell-code}\nk_means_mapped_tbl <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/k_means_mapped_tbl.rds\")\numap_results_tbl   <- read_rds(\"C:/Users/Lenovo/OneDrive/Desktop/daqtascience/ss24-bdml-Fahad221999/Business Decisions with Machine Learning/umap_results_tbl.rds\")\n```\n:::\n\n\n\nFirst, pull out the K-Means for 10 Centers. Use this since beyond this value the Scree Plot flattens. \nHave a look at the business case to recall how that works.\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-19_89756ad442b92792ecf711a4a52d19d1'}\n\n```{.r .cell-code}\n# Get the k_means_obj from the 10th center\nk_means_obj <- k_means_mapped_tbl %>%\n    pull(k_means) %>%\n    pluck(10)\n# Store as k_means_obj\n```\n:::\n\n\nNext, we'll combine the clusters from the `k_means_obj` with the `umap_results_tbl`.\n\n- Begin with the `k_means_obj`\n- Augment the `k_means_obj` with the `stock_date_matrix_tbl` to get the clusters added to the end of the tibble\n- Select just the `symbol` and `.cluster` columns\n- Left join the result with the `umap_results_tbl` by the `symbol` column\n- Left join the result with the result of `sp_500_index_tbl %>% select(symbol, company, sector)` by the `symbol` column. \n- Store the output as `umap_kmeans_results_tbl`\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-20_06663a8329bad01628d24f372a5c8109'}\n\n```{.r .cell-code}\n# Use your dplyr & broom skills to combine the k_means_obj with the umap_results_tbl\numap_kmeans_results_tbl <- k_means_obj %>%\n  augment(stock_date_matrix_tbl) %>%\n  select(symbol, .cluster) %>%\n  left_join(umap_results_tbl) %>%\n  left_join(sp_500_index_tbl %>% select(symbol, company, sector), by = \"symbol\")\n\numap_kmeans_results_tbl\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 502 × 6\n   symbol .cluster      V1      V2 company                       sector         \n   <chr>  <fct>      <dbl>   <dbl> <chr>                         <chr>          \n 1 A      7        -0.764   1.65   Agilent Technologies Inc.     Health Care    \n 2 AAL    2        -2.70    0.455  American Airlines Group Inc.  Industrials    \n 3 AAP    10        0.739  -0.0320 Advance Auto Parts Inc.       Consumer Discr…\n 4 AAPL   9         0.0130  3.09   Apple Inc.                    Information Te…\n 5 ABBV   7        -0.965  -0.0193 AbbVie Inc.                   Health Care    \n 6 ABC    5        -0.506  -0.659  AmerisourceBergen Corporation Health Care    \n 7 ABMD   9         0.436   3.10   ABIOMED Inc.                  Health Care    \n 8 ABT    7        -0.262   1.35   Abbott Laboratories           Health Care    \n 9 ACN    7         0.0598  1.63   Accenture Plc Class A         Information Te…\n10 ADBE   9         0.570   3.43   Adobe Inc.                    Information Te…\n# ℹ 492 more rows\n```\n:::\n\n```{.r .cell-code}\n# Output: umap_kmeans_results_tbl \n```\n:::\n\n\nPlot the K-Means and UMAP results.\n\n- Begin with the `umap_kmeans_results_tbl`\n- Use `ggplot()` mapping `V1`, `V2` and `color = .cluster`\n- Add the `geom_point()` geometry with `alpha = 0.5`\n- Apply colors as you desire (e.g. `scale_color_manual(values = palette_light() %>% rep(3))`)\n\n\n::: {.cell hash='Chapter_1_Challenge_fahad_cache/html/unnamed-chunk-21_a032afe3d33ccd15afd08902440625d2'}\n\n```{.r .cell-code}\n# Visualize the combined K-Means and UMAP results\numap_kmeans_results_tbl %>%\n  ggplot(aes(x = V1, y = V2, color =.cluster)) +\n  geom_point(alpha = 0.5) \n```\n\n::: {.cell-output-display}\n![](Chapter_1_Challenge_fahad_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\nCongratulations! You are done with the 1st challenge!",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}